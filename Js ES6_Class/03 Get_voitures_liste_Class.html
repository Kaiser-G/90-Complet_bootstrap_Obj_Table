<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Exercice 3 (03 Get_voitures_liste_class.html)</title>
  <link rel="stylesheet" href="" />
  <style>
    table,
    th,
    td {
      border: 1px solid black;
    }
  </style>
</head>

<body>


  <button id="btnGo">Go</button>
  <div id="message"></div>
  <div id="reponse">
  </div>
  <!-- Début JS -->
  <script src="./Js class/Ajax_class.js"></script>
  <script src="./Js class/init_ES6.js"></script>
  <script>

    function RetourAjax(reponse) {
      alert("Retour " + reponse);
      // Version améliorée qui gére l'affichage du resultat
      let Liste;
      let myObj = JSON.parse(reponse);

      Liste = "<table><tr><th>Code</th><th>Marque</th><th>Couleur</th><th>Cylindree</th><th>Actions</th></tr>";

      for (let i in myObj.voitures.records) {
        Liste += "<tr><td>" + myObj.voitures.records[i][0] + "</td><td>" + myObj.voitures.records[i][1] + "</td><td>" + myObj.voitures.records[i][2] + "</td><td>" + myObj.voitures.records[i][3] + "</td><td><button>Modifier</button><button>Supprimer</button></td></tr>"

      }
      Liste += "</table>";

      document.getElementById("reponse").innerHTML = Liste;
    }

    function ErreurAjax(reponse) {
      alert("Erreur Ajax " + reponse);
    }
    // Programme PRINCIPAL
    window.addEventListener('load', (event) => {
      let btn = document.getElementById("btnGo");
      btn.addEventListener("click", () => {
        let ajax = new Ajax_Es6(url);
        ajax.get(RetourAjax, ErreurAjax);

      }, false);
    });
  </script>
</body>

</html>